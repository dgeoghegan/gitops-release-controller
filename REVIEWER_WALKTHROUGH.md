# GitOps Release Management Demo — Reviewer Walkthrough

## Section 0 — What this walkthrough is for

This walkthrough is designed for **read-only inspection** by reviewers.

You can validate the core claims of this demo in **3–5 minutes** without running anything or providing credentials. Execution is optional and documented separately.

**Core claim:**  
The only way this demo changes running application state is by merging a Git PR that modifies versioned configuration.

There exists no documented or supported path to mutate runtime state other than a Git commit to this repository.

The purpose is to show, concretely, how deploys and rollbacks are controlled via Git, not imperative actions.

Read-only inspection validates control flow and rollback mechanics, but does not demonstrate reconciliation latency, failure modes, or Argo CD health semantics.

Last validated: **2026-02-03** — PR #24 merged, Argo CD reconciled, application version observed  
(anchored to the merge of https://github.com/dgeoghegan/gitops-release-controller/pull/24)

---

## Section 1 — Artifact map

This demo consists of three repositories:

- **versioned-app**  
  https://github.com/dgeoghegan/versioned-app  
  Minimal application that reports its version.

- **gitops-release-controller**  
  https://github.com/dgeoghegan/gitops-release-controller  
  GitOps configuration, promotion logic, and reviewer artifacts.

- **gitops-infra**  
  https://github.com/dgeoghegan/gitops-infra  
  Infrastructure used to host the demo. It defines the EKS cluster and Argo CD installation used to exercise these reconciliations, but is not required to understand the control mechanism demonstrated here.

Everything below assumes you start in:

**gitops-release-controller**

---

## Section 2 — The 60-Second Confirmation

### Primary confirmation

Open:  
**PR #24 — gitops-release-controller**  
https://github.com/dgeoghegan/gitops-release-controller/pull/24

Look for:  
In **Files changed**, a minimal diff changing `image.tag` in:

https://github.com/dgeoghegan/gitops-release-controller/blob/main/charts/versioned-app/environments/dev/values.yaml

This validates:  
Deploys are controlled entirely by explicit Git diffs. The desired state of each environment is declared in Git.

At runtime, Argo CD observes this Git change and reconciles the environment to match it. There is no workflow, script, Make target, or documented process in this repository that invokes `kubectl`, `helm`, or `terraform apply` against a cluster. A reviewer can falsify this by inspecting `.github/workflows/`, the repository root, and `scripts/`.

The Argo CD `Application` manifest wiring this reconciliation is defined here and targets this repository and path:

https://github.com/dgeoghegan/gitops-release-controller/blob/main/argocd/applications/versioned-app-dev.yaml

What to confirm in the Application manifest:
- `repoURL` points to `gitops-release-controller`
- `path` targets `charts/versioned-app`
- The environment values consumed include `environments/dev/values.yaml`, which is the file changed in PR #24

PR #24 (and the related rollback PR below) are intentionally retained as **reviewer artifacts** and are not subject to squashing or history rewrites.

---

## Section 3 — Rollback is the inverse operation

Open:  
**PR #25 — Revert PR #24**  
https://github.com/dgeoghegan/gitops-release-controller/pull/25

Look for:  
An exact inverse diff that restores the previous image tag in the same environment values file.

PR #25 was generated using GitHub’s **Revert** button and was not manually edited.

Rollback works by producing a new PR with the opposite diff. There is no special rollback mechanism beyond Git history.

This validates:  
Rollback is a trivial, reviewable Git operation with no hidden state.

---

## Section 4 — How PR #24 was created (optional)

PR #24 was generated by a constrained GitHub Actions workflow that:

- Accepts an environment and image tag (or SHA)
- Edits only the relevant environment `values.yaml`
- Opens a PR for review

The workflow scope is constrained to editing environment `values.yaml` files via a fixed path and commit template.

Manual edits to environment values are allowed by design; such edits are still Git commits to `gitops-release-controller`. The workflow exists to standardize and audit common changes.

Removing or disabling this workflow would not change deploy or rollback semantics; it affects only how PRs are authored.

Workflow run and definition:

- Workflow (runs):  
  https://github.com/dgeoghegan/gitops-release-controller/actions/workflows/cannon-deploy.yaml

- Workflow source file:  
  https://github.com/dgeoghegan/gitops-release-controller/blob/main/.github/workflows/cannon-deploy.yaml

---

## Section 5 — Execution

If you choose to execute this project end-to-end, you will need:
- AWS credentials
- A GitHub fork
- Approximately 20–40 minutes

Execution instructions are documented here:

https://github.com/dgeoghegan/gitops-release-controller/blob/main/SETUP_GUIDE.md

Execution demonstrates end-to-end reconciliation timing and runtime behavior, but does not change the deploy or rollback mechanism shown above.

---

## Section 6 — What is demonstrated

- **PR #24** → Environment change via a single Git diff → `values.yaml`
- **PR #25** → Rollback via inverse Git diff → GitHub revert
- **Argo CD Application** → Continuous reconciliation from Git → `argocd/applications/versioned-app-dev.yaml`

This is the complete deploy and rollback mechanism used by this demo.

**Out of scope:** canary deploys, multi-cluster promotion, admission control, OPA/Gatekeeper, policy enforcement, and runtime mutation controls.
